---
// Basic Dark Testimonial section
// ------------
// Description: A centered testimonial section that contains: a quote, a caption and a cite in a dark section with a background image.

// Components
// - Layout
import Section from '../../ui/Section.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'
// - UI
import Testimonial from '../../ui/Testimonial.astro'

// Props
type Props = {
	blockquote?: string
	figcaption?: string
	cite?: string
	bg?: any
	bgPosition?: 'left' | 'right' | 'center'
	classes?: string
	id?: string
}
const {
	blockquote = 'Foxi is like a rocket boost for our productivity! Its sleek design and out-of-this-world features make managing projects and team communication a breeze.',
	figcaption = 'Sheryl Sandberg',
	cite = 'CEO, Facebook',
	bg,
	bgPosition = 'center',
	classes,
	id = 'testimonial'
} = Astro.props
---

<Section
    id={id}
    mode="dark"
    bg={bg}
    bgPosition={bgPosition}
    classes={`testimonial-section ${classes ? classes + ' ' : ''}dark:border-t border-y border-neutral-800`}

>
	<Row>
		<Col span="12">
            <div class="relative z-10">
            <Testimonial
                blockquote={blockquote}
                figcaption={figcaption}
                cite={cite}
                align="center"
                size="4xl"
                mobileSize="2xl"
                classes="!leading-tight font-bold xl:text-5xl max-w-4xl mx-auto text-white"
                quoteSize={112}
            />
            </div>
        </Col>
    </Row>
</Section>

<style is:global>
  /* Default decorative background for testimonial sections */
  .testimonial-section:not(.pricing-testimonial) .section__bg::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url('/quote_dark.webp');
    background-repeat: no-repeat;
    background-position: right center;
    background-size: auto 100%;
    pointer-events: none;
  }

  /* Pricing page variant: gradient base + hair anchored to the edge */
  .testimonial-section.pricing-testimonial .section__bg {
    background: radial-gradient(120% 160% at 80% 100%, rgba(89, 60, 110, 0.65) 0%, rgba(20, 22, 39, 0.92) 55%, rgba(7, 9, 17, 1) 100%);
    background-repeat: no-repeat;
    background-position: center bottom;
    background-size: cover;
  }

  .testimonial-section.pricing-testimonial .section__bg::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url('/quote_dark.webp');
    background-repeat: no-repeat;
    background-position: right bottom;
    background-size: auto 100%;
    pointer-events: none;
  }

  .testimonial-section.pricing-testimonial.pricing-testimonial--berry .section__bg {
    background-image: url('/berry.webp');
    background-size: cover;
    background-position: center;
  }

  .testimonial-section.pricing-testimonial.pricing-testimonial--berry .section__bg::after {
    background-image: none;
    background: linear-gradient(120deg, rgba(11, 14, 22, 0.78) 0%, rgba(11, 14, 22, 0.55) 60%, rgba(11, 14, 22, 0.25) 100%);
  }

  .testimonial-section.pricing-testimonial.section.section--padded {
    padding-top: clamp(5rem, 7vw, 7rem);
  }
</style>

<style is:global>
  /* Make opening quote brand-colored and text white on colored backgrounds */
  .testimonial-section .testimonial--quote { color: #C6A97E; }
  .testimonial-section .testimonial__blockquote > p { color: #fff !important; }
  .testimonial-section .testimonial__figcaption { color: #fff !important; }
</style>
